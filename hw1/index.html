<html>
	<head>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=default'></script>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
		<style>
			h1 {
				text-align: center;
			}

			.container {
				margin: 0 auto;
				padding: 60px 20%;
			}

			figure {
				text-align: center;
			}

			img {
				display: inline-block;
			}

			body {
				font-family: 'Inter', sans-serif;
			}
		</style>
	</head>
	<body>
		<div class="container">
		<h1>CS184/284A Spring 2025 Homework 1 Write-Up</h1>
		<div style="text-align: center;">Names: </div>

		<br>

		Link to webpage: <a href="https://cal-cs184-student.github.io/hw-webpages-iradabke/hw1/index.html">cs184.eecs.berkeley.edu/sp25</a>
		
		<br>

		Link to GitHub repository: (TODO) <a href="https://cs184.eecs.berkeley.edu/sp25">cs184.eecs.berkeley.edu/sp25</a>

		<figure>
			<img src="lion.jpg" alt="Lion" style="width:50%"/>
			<figcaption>You can add images with captions!</figcaption>
		</figure>

		<!--
		We've already added one heading per task, to make your write-up as navigable when grading. Please fit your write-up within these sections!
		-->

		<h2>Overview</h2>
		Give a high-level overview of what you implemented in this homework. Think about what you've built as a whole. Share your thoughts on what interesting things you've learned from completing the homework.

		<h2>Task 1: Drawing Single-Color Triangles</h2>
		To rasterize the triangles, I implemented an algorithm to sample whether a point lies within or outside of the triangle. I know that if I'm given
		the three points of a triangle, all of the x-coordinates of points contained within the triangle must be greater than or equal to that minimum point. 
		The same logic is applied to the minimum y-coordinate which is which why when iterating through points, I can directly start iterating at the minimum x
		and y coordinates and stop and the maximum x and y coordinates as opposed to sampling every point in the sample space. 

		<p>Now, in order to check whether points I am iterating through are inside or outside the triangle, I use the three line test. Essentially this checks
		whether a point is inside an edge, outside an edge, or on an edge by calculating the cross product of a point and a line defined by two vertices.
		If the cross product is on the same side of all of the lines (i.e. their cross products are all the same sign), then the point lies within the triangle
		and is rasterized with the given color. The following is the cross product formula used for this evaluation.</p>
				
				<li>\[ (x - x0) * (y1 - y0) - (y - y0) * (x1 - x0) \]</li>  


		<p>My algorithm only iterates over samples within the min and max x and y bounds of the triangles which means it performs a constant amount of operations
		per triangle. This means it's no worse than an algorithm that checks every sample within a box defined by a rectangle.</p>

		<p>Here is an example 2x2 gridlike structure using an HTML table. Each <b>tr</b> is a row and each <b>td</b> is a column in that row. You might find this useful for framing and showing your result images in an organized fashion.</p>
		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
			  <tr>
				<td style="text-align: center;">
				  <img src="triangle.png" width="400px"/>
				  <figcaption>Triangles after sampling.</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="jag_triangle.png" width="400px"/>
				  <figcaption>Jagged edges shown when zoomed in.</figcaption>
				</td>
			  </tr>
			</table>
		</div>
		
		<h2>Task 2: Antialiasing by Supersampling</h2>
		Before I implemented supersampling, I was only sampling 1 color per pixel. Now, using super sampling, I am sampling sample_rate colors
		per pixel. This means that the amount of samples in the Color vector that holds the colors per sample needs to be expanded to the width *
		height * sample rate. To ensure this, I editted sample_buffer in the rasterization pipeline via set_framebuffer_target to ensure the buffer is resizing according to the sample
		rate. Initially, I sampled at the center of each pixel but for super sampling, I need to convert our initial pixel to it's place on the expanded
		grid with w * h * sample rate pixels. For this conversion, I added extra for loops that iterated sample rate times per pixel since each pixel 
		is now split up into sample rate groups. Then I used the equation:

				<li>\[ x + (i + 0.5) / s \]</li>  
				<li>\[ y + (j + 0.5) / s \]</li>  

		to convert the location of the pixel at x, y to its new location on the expanded sample_buffer. The i and j facillitated the break down of each pixel into 
		sample rate parts to determine the transformation. Now, we use the same equation as before to compute whether or not the subpixel lies within the
		triangle. If it does, that subpixel is colored. In order to fill a pixel with the average color of all of its subsamples which is the ultimate goal, 
		I modified resolve_to_frambuffer in the rasterization pipeline to average the colors from the sample. Finally, fill_pixel takes this "average color" and fills all the subpixels with
		the same color so each original pixel is completely filled in with the average color. 

		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
			  <tr>
				<td style="text-align: center;">
				  <img src="sample1.png" width="400px"/>
				  <figcaption>Triangles after sample_rate = 1.</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="sample4.png" width="400px"/>
				  <figcaption>Triangles after sample_rate = 4.</figcaption>
				</td>
			  </tr>
			  <tr>
				<td style="text-align: center;">
				  <img src="sample16.png" width="400px"/>
				  <figcaption>Triangles after sample_rate = 16.</figcaption>
				</td>
			  </tr>
			</table>
		</div>
		<p>As the sample rate increases, we can see there are more shades of color. If sample_rate = n, then there are n possible shades a pixel can be. From the zoomed out perspective, if you 
			look closely, the edges appear smoother than they were for higher sample rates than lower sample rates. 
		</p>
		<h2>Task 3: Transforms</h2>
		For translating, scaling, and rotating, I used the corresponding coordinate system linear algebra to facillitate the transformation:

		<p><b>Translation: </b>
			<div class="matrix">
				<table>
				  <tr>
					<td>1</td><td>0</td><td>tx</td>
				  </tr>
				  <tr>
					<td>0</td><td>1</td><td>ty</td>
				  </tr>
				  <tr>
					<td>0</td><td>0</td><td>1</td>
				  </tr>
				</table>
			  </div> 
			This represents adding tx to the x-coordinates and ty to the y-coordinates. The resulting point in a 2D space is (x+tx y+ty 1).
		</p>

		<p><b>Scaling: </b>
			<div class="matrix">
				<table>
				  <tr>
					<td>sx</td><td>0</td><td>0</td>
				  </tr>
				  <tr>
					<td>0</td><td>sy</td><td>0</td>
				  </tr>
				  <tr>
					<td>0</td><td>0</td><td>1</td>
				  </tr>
				</table>
			  </div> 
			This represents scaling sx to the x-coordinates and sy to the y-coordinates. The resulting point in a 2D space is (x*sx y*sy 1).
		</p>

		<p><b>Rotation: </b>
			<div class="matrix">
				<table>
				  <tr>
					<td>cos α</td><td>-sin α</td><td>0</td>
				  </tr>
				  <tr>
					<td>sin α</td><td>cos α</td><td>0</td>
				  </tr>
				  <tr>
					<td>0</td><td>0</td><td>1</td>
				  </tr>
				</table>
			  </div> 
			This represents rotation by converting the matrix with our 2D (x, y) point to (xcos α - ysin α, xsin α + ycos α, 1). This effectively rotates it &alpha degrees.
		</p>

		<p>I added translations to the original robot in order to make it appear as if it "worked out" by rotating the head back straight and scaling the biceps and thighs to appear bigger. </p>

		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
			  <tr>
				<td style="text-align: center;">
				  <img src="not_muscular.png" width="400px"/>
				  <figcaption>Original robot before translations.</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="muscular.png" width="400px"/>
				  <figcaption>Robot after translations.</figcaption>
				</td>
			  </tr>
			</table>
		</div>

		<h2>Task 4: Barycentric coordinates</h2>
		Keeping my original methods of rasterizing triangles and supersampling from task 1 and task 2, I made one addition amendment to my code in order to support drawing colors
		within triangles using barycentric interpolation. Using barycentric interpolation, vertices are defined to have given colors. Colors that aren't in the defined vertices are
		given colors that are a mix of the colors at the vertices proportional to their distances to those vertices. Barycentric interpolation ensures a smooth gradient of colors
		among the triangle. In order to determine what color a particular point should take, we calculate 3 parameters: α, β, and γ. If we split the triangle into three subtriangle
		created by drawing a line from each vertex to the point we are coloring, these three parameters are equal to the proportion of each subtriangle to the total area of the subtriangle.
		Therefore, to calculate these values, I used the equations: 

				<li>\[ α = subtriangle a / triangle area \]</li>  
				<li>\[ β = subtriangle b / triangle area \]</li>
				<li>\[ γ = subtriangle c / triangle area \]</li> 
		<p>Then, I combined these proportions (called proportions since α + β + γ = 1) to determine the color of the pixel.</p>
				<li>\[ α * color of vertex a + β * color of vertex b + γ * color of vertex c \]</li> 		
		<p>As we can see in the following two pictures, the colors are populated in a smooth gradient due to the barycentric interpolation. When setting a triangle's three vertices to just
			a solid red, blue, and green, the colors are more red towards the red vertex, more blue towards the blue vertex, and more green towards the green vertex. Getting closer to the middle,
			the triangle begins to show a mixture of the three colors.
		</p>

		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
			  <tr>
				<td style="text-align: center;">
				  <img src="color_wheel.png" width="400px"/>
				  <figcaption>Color wheel demonstrating smooth gradient of color.</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="colored_triangle.png" width="400px"/>
				  <figcaption>Single triangle with RGB vertices.</figcaption>
				</td>
			  </tr>
			</table>
		</div>
			  


		<h2>Task 5: "Pixel sampling" for texture mapping</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

		<h2>Task 6: "Level Sampling" with mipmaps for texture mapping</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

		<h2>(Optional) Task 7: Extra Credit - Draw Something Creative!</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

		<h2>Additional Notes (please remove)</h2>
		<ul>
			<li>You can also add code if you'd like as so: <code>code code code</code></li>
			<li>If you'd like to add math equations, 
				<ul>
					<li>You can write inline equations like so: \( a^2 + b^2 = c^2 \)</li>
					<li>You can write display equations like so: \[ a^2 + b^2 = c^2 \]</li>
				</ul>
			</li>
		</ul>
		</div>
	</body>
</html>